{"ast":null,"code":"var _process$env$REACT_AP, _process$env$REACT_AP2, _process$env$REACT_AP3;\n\nimport axios from 'axios';\nimport qs from 'qs';\nimport { isAsExpression } from 'typescript';\nexport const BASE_URL = (_process$env$REACT_AP = process.env.REACT_APP_BACKEND_URL) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : 'http://localhost:8080';\nconst tokenKey = 'authData';\nconst CLIENT_ID = (_process$env$REACT_AP2 = process.env.REACT_APP_CLIENT_ID) !== null && _process$env$REACT_AP2 !== void 0 ? _process$env$REACT_AP2 : 'dscatalog';\nconst CLIENT_SECRET = (_process$env$REACT_AP3 = process.env.REACT_APP_CLIENT_SECRET) !== null && _process$env$REACT_AP3 !== void 0 ? _process$env$REACT_AP3 : 'dscatalog123';\n\nconst basicHeader = () => 'Basic ' + window.btoa(CLIENT_ID + ':' + CLIENT_SECRET);\n\nexport const requestBackendLogin = loginData => {\n  const headers = {\n    'Content-Type': 'application/x-www-form-urlencoded',\n    Authorization: basicHeader()\n  };\n  const data = qs.stringify({ ...loginData,\n    grant_type: 'password'\n  });\n  return axios({\n    method: 'POST',\n    baseURL: BASE_URL,\n    url: '/oauth/token',\n    data,\n    headers\n  });\n};\nexport const requestBackend = config => {\n  return isAsExpression();\n};\nexport const saveAuthData = obj => {\n  localStorage.setItem(tokenKey, JSON.stringify(obj));\n};\nexport const getAuthData = () => {\n  var _localStorage$getItem;\n\n  const str = (_localStorage$getItem = localStorage.getItem(tokenKey)) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : \"{}\";\n  return JSON.parse(str);\n};","map":{"version":3,"names":["axios","qs","isAsExpression","BASE_URL","process","env","REACT_APP_BACKEND_URL","tokenKey","CLIENT_ID","REACT_APP_CLIENT_ID","CLIENT_SECRET","REACT_APP_CLIENT_SECRET","basicHeader","window","btoa","requestBackendLogin","loginData","headers","Authorization","data","stringify","grant_type","method","baseURL","url","requestBackend","config","saveAuthData","obj","localStorage","setItem","JSON","getAuthData","str","getItem","parse"],"sources":["C:/Users/centr/Documents/Materiais de Estudo/ProjetoReact/frontweb/src/util/requests.ts"],"sourcesContent":["import axios from 'axios';\r\nimport qs from 'qs';\r\nimport { isAsExpression } from 'typescript';\r\n\r\ntype LoginResponse = {\r\n     access_token : string;\r\n     token_type : string;\r\n     expires_in : number;\r\n     scope : string;\r\n     userFirstName : string;\r\n     userId : number;\r\n}\r\n\r\nexport const BASE_URL = process.env.REACT_APP_BACKEND_URL ?? 'http://localhost:8080';\r\n\r\nconst tokenKey = 'authData';\r\n\r\nconst CLIENT_ID = process.env.REACT_APP_CLIENT_ID ??'dscatalog';\r\nconst CLIENT_SECRET = process.env.REACT_APP_CLIENT_SECRET ??'dscatalog123';\r\n\r\nconst basicHeader = () => 'Basic ' + window.btoa(CLIENT_ID + ':' + CLIENT_SECRET)\r\n\r\ntype LoginData = {\r\n    username:string;\r\n    password:string;\r\n}\r\n\r\nexport const requestBackendLogin = (loginData : LoginData) => {\r\n\r\n    const headers = {\r\n        'Content-Type' : 'application/x-www-form-urlencoded',\r\n         Authorization: basicHeader()\r\n    }\r\n\r\n    const data = qs.stringify ({\r\n        ...loginData,\r\n        grant_type: 'password'\r\n\r\n    });\r\n    return axios ({method: 'POST',baseURL: BASE_URL, url: '/oauth/token', data, headers});\r\n}\r\n\r\nexport const requestBackend = (config: AxiosRequestConfig) =>{\r\n    return isAsExpression()\r\n}\r\n\r\nexport const saveAuthData = (obj : LoginResponse) => {\r\n    localStorage.setItem(tokenKey, JSON.stringify(obj));\r\n}\r\n\r\nexport const getAuthData = () => {\r\n    const str = localStorage.getItem(tokenKey) ?? \"{}\";\r\n    return JSON.parse(str) as LoginResponse;\r\n  }"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,cAAT,QAA+B,YAA/B;AAWA,OAAO,MAAMC,QAAQ,4BAAGC,OAAO,CAACC,GAAR,CAAYC,qBAAf,yEAAwC,uBAAtD;AAEP,MAAMC,QAAQ,GAAG,UAAjB;AAEA,MAAMC,SAAS,6BAAGJ,OAAO,CAACC,GAAR,CAAYI,mBAAf,2EAAqC,WAApD;AACA,MAAMC,aAAa,6BAAGN,OAAO,CAACC,GAAR,CAAYM,uBAAf,2EAAyC,cAA5D;;AAEA,MAAMC,WAAW,GAAG,MAAM,WAAWC,MAAM,CAACC,IAAP,CAAYN,SAAS,GAAG,GAAZ,GAAkBE,aAA9B,CAArC;;AAOA,OAAO,MAAMK,mBAAmB,GAAIC,SAAD,IAA2B;EAE1D,MAAMC,OAAO,GAAG;IACZ,gBAAiB,mCADL;IAEXC,aAAa,EAAEN,WAAW;EAFf,CAAhB;EAKA,MAAMO,IAAI,GAAGlB,EAAE,CAACmB,SAAH,CAAc,EACvB,GAAGJ,SADoB;IAEvBK,UAAU,EAAE;EAFW,CAAd,CAAb;EAKA,OAAOrB,KAAK,CAAE;IAACsB,MAAM,EAAE,MAAT;IAAgBC,OAAO,EAAEpB,QAAzB;IAAmCqB,GAAG,EAAE,cAAxC;IAAwDL,IAAxD;IAA8DF;EAA9D,CAAF,CAAZ;AACH,CAbM;AAeP,OAAO,MAAMQ,cAAc,GAAIC,MAAD,IAA+B;EACzD,OAAOxB,cAAc,EAArB;AACH,CAFM;AAIP,OAAO,MAAMyB,YAAY,GAAIC,GAAD,IAAyB;EACjDC,YAAY,CAACC,OAAb,CAAqBvB,QAArB,EAA+BwB,IAAI,CAACX,SAAL,CAAeQ,GAAf,CAA/B;AACH,CAFM;AAIP,OAAO,MAAMI,WAAW,GAAG,MAAM;EAAA;;EAC7B,MAAMC,GAAG,4BAAGJ,YAAY,CAACK,OAAb,CAAqB3B,QAArB,CAAH,yEAAqC,IAA9C;EACA,OAAOwB,IAAI,CAACI,KAAL,CAAWF,GAAX,CAAP;AACD,CAHI"},"metadata":{},"sourceType":"module"}